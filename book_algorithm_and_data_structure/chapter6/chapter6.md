# 第 6 章 ソート

## 6-1 ソートとは

ソートは、キーとなる項目の値の大小関係に基づいて、データの集合を一定の順序に並び替える作業です。

### ソートアルゴリズムの安定性

- 安定なソート：同一キーを持つ要素の順序がソート前後で維持される

### 内部ソートと外部ソート

- 内部ソート：ソートの対象となる全てのデータが、一つの配列上に格納できる場合に用いるアルゴリズムです。カードは、配列上に展開された要素に相当します。
- 外部ソート：ソートの炊いてょうとなるデータが大量であり、一度に並び替えることができない場合に用いるアルゴリズムです。

### ソートの考え方

ソートアルゴリズムの三大要素

- 交換
- 選択
- 挿入

## 6-2 単純交換ソート（バブルソート）

単純に隣合わせの２つの要素を比較して、降順、昇順などで入れ替える

※双方向バブルソート（シェーカーソート）というものもある

## 6-3 単純選択ソート

単純選択ソートは、最小要素を先頭に移動し、二番目に小さい要素を先頭から二番目に移動するといった作業を繰り返すソートのこと。

## 6-4 単純挿入ソート

単純挿入ソートは、着目要素をそれより先頭側の適切に位置に挿入する作業を繰り返してソートを行うアルゴリズムです。

### 単純挿入ソートの特徴

- ソート済み、あるいは、それに近い状態では高速である。
- 挿入先が遠く離れている場合は、移動（代入）回数が多くなる

## 6-5 シェルソート

シェルソートは、単純挿入ソートの長所を生かしたまま、その短所を補うことで、高速にソートするアルゴリズムです。
単純挿入ソートの特徴の前者の長所を活かしつつ、後者の短所を補うのがシェルソート。最初に離れた要素をグループ化して大まかなソートを行い、そのグループを縮小しながらソートを繰り返すことによって移動回数を減らそうというアイデアです。
※離れた要素を交換するため安定ではありません。

## 6-6 クイックソート

クイックソートは、最も高速なソートのアルゴリズムの一つとして知られるとともに、広く利用されています。

### 例：8 人のグループを身長順にソートする

1. ある一人の身長に注目する。例えば、身長が 170 センチの A 君を選び、A 君以下と A 君以上のグループに分けられる。このグループ分けの基準のことを、枢軸（pivot）と呼ぶ。(枢軸はどちらに入れても OK)
2. 各グループに対して枢軸をして分割を繰り返していき、全てのグループが一人だけになるとソートが完了する

### 配列の分割

partition.py

### 枢軸の選択

枢軸の選択が、クイックソートの実行効率に大きく影響を与える。値として中央値を枢軸とするのが理想だが、それには多大な計算時間がかかる。
そのため、下記の２つの方針がある

1. 分割すべき配列の要素数が 3 以上であれば、任意の 3 個の要素を取り出し、その中央値を持つ要素を枢軸として選択する。
2. 分割すべき配列の先頭要素・中央要素・末尾要素の 3 要素をソートして、更に中央要素と末尾から 2 番目の要素を交換する。枢軸として末尾から 2 番目の要素の値 a[right - 1]を採用するとおｔも似、分割の対象を a[left + 1]~a[right - 2]に絞り込む。

### クイックソートの時間計算量

クイックソートは O(nlogn)
要素数が小さい場合は、それほど高速ではない。そのため、組み合わせて使用する。

- 要素数が小さい場合は、単純挿入ソートに切り替える
- 上記の 2 の方針

## 6-7 マージソート

マージソートは、配列を前半部と後半部の２つに分けて、それぞれをソートしたものをマージする作業を繰り返すことによってソートを行うアルゴリズムです。

### ソート済み配列のマージ

２つのソート済み配列を先頭から走査し、それぞれの配列のうち小さい法を格納。

### マージソート

マージソートのアルゴリズム

- 配列の要素数が 2 以上であれば、以下の手続きを適用する。
  - 配列の前半部をマージソートによってソートする。
  - 配列の後半部をマージソートによってソートする。
  - 配列の前半部と後半部をマージする。

## 6-8 ヒープソート

選択外の応用的なアルゴリズムであるヒープソートは、ヒープの特性をうまく利用してソートを行う。
ヒープとは、、親の値が子の値以上であるという条件を満たす完全 2 分木です。
最大値が根に位置することをうまく利用して、下記の作業を繰り返します。

1. ヒープから最大値である根を取り出す。
2. 根以外の部分をヒープ化する。
   2-1. 最後の要素（最下流の最も右側に位置する要素）を根に移動する。
   2-2. 自身より大きい方のこと交換して一つ下流に降りる作業を根から初めて以下の条件のいずれか一方が成立するまで繰り返す。 - 子のほうが値が小さい - 葉に到達した。

※最初に配列のヒープ化が必要

## 6-9 度数ソート
分布数え上げソートとも呼ばれる度数ソートは、要素の第要関係を判定することなく、高速なソートを行うアルゴリズムです。
度数ソートは、キーを比較する必要がない。
1. 度数分布表を作成
2. 累積度数分布表の作成
3. 目的配列の作成
4. 配列のコピー